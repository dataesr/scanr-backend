/*
 * Copyright 2016-2019 MESRI
 * Apache License 2.0
 */

package fr.gouv.recherche.scanr.workflow.structure.menesr;

import fr.gouv.recherche.scanr.workflow.menesr.MenesrImportService;
import org.junit.Assert;
import org.junit.Test;

public class MenesrFetcherTest {

//    @Test
//    public void should_fetch_right_number_of_structures_V1_from_json_file() {
//        MenesrFetcher menesrFetcher = new MenesrFetcher();
//        URL $structuresURL = this.getClass().getResource("model/v1/rnsr.json");
//        List<fr.gouv.recherche.scanr.db.model.Structure> structures =  menesrFetcher.fetchResources(fr.gouv.recherche.scanr.db.model.Structure.class, $structuresURL.getPath());
//        Assert.assertEquals(3742, structures.size());
//    }
//
//    @Test
//    public void should_fetch_right_number_of_structures_V2_from_json_file() {
//        MenesrFetcher menesrFetcher = new MenesrFetcher();
//        URL $structuresURL = this.getClass().getResource("model/v2/organizations.json");
//        List<fr.gouv.recherche.scanr.db.model.Structure> structures =  menesrFetcher.fetchResources(fr.gouv.recherche.scanr.db.model.Structure.class, $structuresURL.getPath());
//        Assert.assertEquals(1, structures.size());
//    }
//
//    @Test
//    public void should_have_right_number_of_structures_V2_id_from_json_file() {
//        MenesrFetcher menesrFetcher = new MenesrFetcher();
//        URL $structuresURL = this.getClass().getResource("model/v2/organizations.json");
//        List<fr.gouv.recherche.scanr.db.model.Structure> structures =  menesrFetcher.fetchResources(fr.gouv.recherche.scanr.db.model.Structure.class, $structuresURL.getPath());
//        Set<String> idsToUpdate = structures.stream().map(fr.gouv.recherche.scanr.db.model.Structure::getId).collect(Collectors.toSet());
//        Assert.assertEquals(1, idsToUpdate.size());
//    }
//    @Test
//    public void should_works() {
//        MenesrImportService menesrImportService = new MenesrImportService();
//        int idsToUpdate = menesrImportService.fetchStructures();
//        Assert.assertEquals(9, idsToUpdate);
//    }
}
